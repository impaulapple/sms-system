(this["webpackJsonpreact-empty-template"]=this["webpackJsonpreact-empty-template"]||[]).push([[4],{711:function(e,t,a){},820:function(e,t,a){"use strict";a.r(t);var n=a(5),c=a(68),i=a(82),o=a(77),s=a(819),r=a(815),l=a(0),d=a.n(l),u=a(661),b=(a(711),a(486)),p=a(818),j=function(e){var t=e.children,a=e.value,c=e.index,o=Object(b.a)(e,["children","value","index"]);return Object(n.jsx)("div",Object(i.a)(Object(i.a)({role:"tabpanel",hidden:a!==c,id:"vertical-tabpanel-".concat(c),"aria-labelledby":"vertical-tab-".concat(c)},o),{},{children:a===c&&Object(n.jsx)(p.a,{p:3,children:t})}))},h=a(677),m=a(811),f=a(812),x=a(813),v=a(816),O=a(814),g=a(673),y=a(679),w=a(499),k=a(653),S=a(83),C=a(799),T=a(731),E=a.n(T).a.create({baseURL:"http://localhost:5000/",headers:{"Content-Type":"application/json",Pragma:"no-cache",crossdomain:!0}}),D=a(798),N=a.n(D),F=function(e){var t=e[0],a=[];for(var n in t)"_id"!==n&&a.push({dataField:n,text:n});return a},M=a(750),R=a.n(M),I=(a(510),a(788)),L=a.n(I),z=function(e){for(var t=0,a=e.length;t<a;t++)e[t]._id=t;return e},B=Object(w.a)({overrides:{MuiTabs:{scrollButtonsDesktop:{backgroundColor:"rgb(0 0 0 / 13%)"}},MuiTypography:{body1:{fontSize:"13px",lineHeight:"20px"}},MuiTab:{wrapper:{textTransform:"none"}},MuiOutlinedInput:{inputMarginDense:{padding:"6px 10.5px !important"}}}}),J=function(){var e,t=Object(y.a)().t,a=d.a.useRef(null),c=d.a.useState(0),i=Object(o.a)(c,2),l=i[0],u=i[1],b=d.a.useState(""),w=Object(o.a)(b,2),T=w[0],D=w[1],M=d.a.useState(!1),I=Object(o.a)(M,2),J=I[0],_=I[1],A=d.a.useState(null!==(e=document.sms&&document.sms.dataSourceList)&&void 0!==e?e:[{id:123,caption:"newTable",isEdit:!1,content:null,showRemoveIcon:!1},{id:124,caption:"test2",isEdit:!1,content:null,showRemoveIcon:!1}]),K=Object(o.a)(A,2),P=K[0],U=K[1];d.a.useEffect((function(){document.sms||(document.sms={}),document.sms.dataSourceList=P}));var W=function(e){var t=e.target.id;if(Object(S.a)(t)&&(t=e.target.parentElement.id),!Object(S.a)(t)){for(var a=P.slice(),n=0,c=a.length;n<c;n++)if(a[n].id===parseInt(t)){a[n].isEdit=!0,D(a[n].caption);break}U(a)}},G=function(e){D(e.target.value)},H=function(e){if(13===e.charCode||"blur"===e.type){for(var t=e.target.value,a=e.target.id,n=P.slice(),c=0,i=n.length;c<i;c++)if(n[c].id===parseInt(a)){n[c].isEdit=!1,n[c].caption=t;break}U(n)}},q=function(e){if(!Object(S.a)(e)){var t=e[0],a=new FileReader;a.addEventListener("load",(function(){Q(a.result)}),!1),a.readAsDataURL(t)}},Q=function(e){var t;(t=e,E.post("/DataSources/ConvertToJson",{FileBase64:t})).then((function(e){var t=Object(S.c)(e.data);if(!Object(S.a)(t))return console.log("error:",t),alert(t);var a=e.data.content,n=P.slice();n[l].content=a,U(n)})).catch((function(e){console.log("error:",e)}))},V=function(e){var t=!0;"mouseleave"===e.type&&(t=!1);var a=e.target;if(!a.className||a.className.indexOf){a.className&&a.className.indexOf&&-1===a.className.indexOf("sms-datasource-tab")&&(a=e.target.parentElement),function(e){for(var t=0;null!=(e=e.previousSibling);)++t;return t}(a)!==l&&(t=!1);var n=P.slice();n[l].showRemoveIcon=t,U(n)}},X=function(e){_(!0)},Y=function(e){_(!1)};return Object(n.jsxs)(k.a,{theme:B,children:[Object(n.jsxs)(p.a,{sx:{bgcolor:"background.paper"},children:[Object(n.jsxs)(s.a,{style:{width:"80%"},value:l,onChange:function(e,t){u(t)},variant:"scrollable",scrollButtons:"auto",ref:a,children:[P.map((function(e,t){return e.isEdit?Object(n.jsx)(r.a,{id:e.id,icon:Object(n.jsx)(h.a,{hiddenLabel:!0,autoFocus:!0,style:{width:130},id:e.id.toString(),variant:"outlined",size:"small",value:T,onBlur:H,onKeyPress:H,onChange:G})},t):Object(n.jsx)(r.a,{className:"sms-datasource-tab",id:e.id,iconposition:"end",onDoubleClick:W,onMouseMove:V,onMouseLeave:V,label:Object(n.jsxs)(n.Fragment,{children:[e.caption,e.showRemoveIcon?Object(n.jsx)(N.a,{style:{position:"absolute",right:0},onClick:X}):null]})},t)})),Object(n.jsx)(r.a,{label:"\u271a",style:{minWidth:"48px",background:"#c3bfbf"},onClick:function(e){var a=P.slice(),n=Math.max.apply(null,a.map((function(e){return e.id})));a.push({id:++n,caption:t("newTable")+(a.length+1),isEdit:!1}),U(a)}})]}),P.map((function(e,a){return Object(S.a)(e.content)?Object(n.jsx)(j,{style:{width:"100%"},value:l,index:a,children:Object(n.jsx)(C.a,{style:{heigth:"500px",width:"600px"},acceptedFiles:[".csv",".xlsx"],filesLimit:1,maxFileSize:5242880,dropzoneText:t("uploadDataSource"),onChange:q})},a):Object(n.jsx)(j,{style:{width:"100%"},value:l,index:a,children:Object(n.jsx)(R.a,{style:{minWidth:"100%"},keyField:"_id",data:z(e.content),columns:F(e.content),cellEdit:L()({mode:"dbclick",blurToSave:!0})})},a)}))]}),Object(n.jsxs)(m.a,{open:J,onClose:Y,children:[Object(n.jsx)(f.a,{id:"delete-dialog-title",children:t("confirmDeleteTable")}),Object(n.jsx)(x.a,{style:{width:"450px"},children:Object(n.jsxs)(v.a,{id:"delete-dialog-description",children:[t("dataTable"),":\u300c",P[l].caption,"\u300d",t("confirmDeleteDetail")]})}),Object(n.jsxs)(O.a,{children:[Object(n.jsx)(g.a,{onClick:Y,variant:"contained",color:"primary",autoFocus:!0,children:t("Disagree")}),Object(n.jsx)(g.a,{onClick:function(e){var t=P.slice();t.splice(l,1),U(t),Y()},disabled:1===P.length,children:t("Agree")})]})]})]})},_=a(479),A=a.n(_),K=a(481),P=a.n(K),U=Object(u.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",height:"100%"},tabs:{borderRight:"1px solid ".concat(e.palette.divider)},test:{width:"50px !important"}}}));t.default=function(){var e,t=Object(y.a)().t,a=U(),l=[{caption:t("setting"),component:Object(n.jsx)("h1",{children:"yoyoyoyoyo King! \u9019\u662f\u7b2c\u4e00\u9801"})},{caption:t("dataSrouce"),component:Object(n.jsx)(J,{})},{caption:t("smsTool"),component:Object(n.jsx)(A.a,{})},{caption:t("smsScheduler"),component:Object(n.jsx)(P.a,{})}],u=d.a.useState(1),b=Object(o.a)(u,2),p=b[0],h=b[1];return Object(n.jsxs)("div",{className:a.root,children:[Object(n.jsx)(s.a,(e={className:"sms-index-tabs",orientation:"vertical",variant:"scrollable",value:p,onChange:function(e,t){h(t)}},Object(c.a)(e,"className",a.tabs),Object(c.a)(e,"componentsprops",{indicator:{className:"Indicator"}}),Object(c.a)(e,"children",l.map((function(e,t){return Object(n.jsx)(r.a,Object(i.a)({label:e.caption},{id:"vertical-tab-".concat(a=t),"aria-controls":"vertical-tabpanel-".concat(a)}),t);var a}))),e)),l.map((function(e,t){return Object(n.jsx)(j,{style:{width:"100%"},value:p,index:t,children:e.component},t)}))]})}}}]);
//# sourceMappingURL=4.499d63cd.chunk.js.map