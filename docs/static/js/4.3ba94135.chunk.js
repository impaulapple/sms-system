(this["webpackJsonpreact-empty-template"]=this["webpackJsonpreact-empty-template"]||[]).push([[4],{711:function(e,t,a){},820:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a(82),c=a(77),o=a(819),s=a(815),r=a(0),l=a.n(r),d=a(661),u=(a(711),a(486)),b=a(818),p=function(e){var t=e.children,a=e.value,c=e.index,o=Object(u.a)(e,["children","value","index"]);return Object(n.jsx)("div",Object(i.a)(Object(i.a)({role:"tabpanel",hidden:a!==c,id:"vertical-tabpanel-".concat(c),"aria-labelledby":"vertical-tab-".concat(c)},o),{},{children:a===c&&Object(n.jsx)(b.a,{p:3,children:t})}))},j=a(677),h=a(811),m=a(812),f=a(813),v=a(816),x=a(814),O=a(673),g=a(679),y=a(499),w=a(653),k=a(83),S=a(799),C=a(731),T=a.n(C).a.create({baseURL:"http://localhost:5000/",headers:{"Content-Type":"application/json",Pragma:"no-cache",crossdomain:!0}}),E=a(798),D=a.n(E),F=function(e){var t=e[0],a=[];for(var n in t)"_id"!==n&&a.push({dataField:n,text:n});return a},M=a(750),N=a.n(M),R=(a(510),a(788)),I=a.n(R),L=function(e){for(var t=0,a=e.length;t<a;t++)e[t]._id=t;return e},z=Object(y.a)({overrides:{MuiTabs:{scrollButtonsDesktop:{backgroundColor:"rgb(0 0 0 / 13%)"}},MuiTypography:{body1:{fontSize:"13px",lineHeight:"20px"}},MuiTab:{wrapper:{textTransform:"none"}},MuiOutlinedInput:{inputMarginDense:{padding:"6px 10.5px !important"}}}}),B=function(){var e,t=Object(g.a)().t,a=l.a.useRef(null),i=l.a.useState(0),r=Object(c.a)(i,2),d=r[0],u=r[1],y=l.a.useState(""),C=Object(c.a)(y,2),E=C[0],M=C[1],R=l.a.useState(!1),B=Object(c.a)(R,2),J=B[0],_=B[1],A=l.a.useState(null!==(e=document.sms&&document.sms.dataSourceList)&&void 0!==e?e:[{id:123,caption:"newTable",isEdit:!1,content:null,showRemoveIcon:!1},{id:124,caption:"test2",isEdit:!1,content:null,showRemoveIcon:!1}]),K=Object(c.a)(A,2),P=K[0],U=K[1];l.a.useEffect((function(){document.sms||(document.sms={}),document.sms.dataSourceList=P}));var W=function(e){var t=e.target.id;if(Object(k.a)(t)&&(t=e.target.parentElement.id),!Object(k.a)(t)){for(var a=P.slice(),n=0,i=a.length;n<i;n++)if(a[n].id===parseInt(t)){a[n].isEdit=!0,M(a[n].caption);break}U(a)}},G=function(e){M(e.target.value)},H=function(e){if(13===e.charCode||"blur"===e.type){for(var t=e.target.value,a=e.target.id,n=P.slice(),i=0,c=n.length;i<c;i++)if(n[i].id===parseInt(a)){n[i].isEdit=!1,n[i].caption=t;break}U(n)}},q=function(e){if(!Object(k.a)(e)){var t=e[0],a=new FileReader;a.addEventListener("load",(function(){Q(a.result)}),!1),a.readAsDataURL(t)}},Q=function(e){var t;(t=e,T.post("/DataSources/ConvertToJson",{FileBase64:t})).then((function(e){var t=Object(k.c)(e.data);if(!Object(k.a)(t))return console.log("error:",t),alert(t);var a=e.data.content,n=P.slice();n[d].content=a,U(n)})).catch((function(e){console.log("error:",e)}))},V=function(e){var t=!0;"mouseleave"===e.type&&(t=!1);var a=e.target;if(!a.className||a.className.indexOf){a.className&&a.className.indexOf&&-1===a.className.indexOf("sms-datasource-tab")&&(a=e.target.parentElement),function(e){for(var t=0;null!=(e=e.previousSibling);)++t;return t}(a)!==d&&(t=!1);var n=P.slice();n[d].showRemoveIcon=t,U(n)}},X=function(e){_(!0)},Y=function(e){_(!1)};return Object(n.jsxs)(w.a,{theme:z,children:[Object(n.jsxs)(b.a,{sx:{bgcolor:"background.paper"},children:[Object(n.jsxs)(o.a,{style:{width:"80%"},value:d,onChange:function(e,t){u(t),console.log(t)},variant:"scrollable",scrollButtons:"auto",ref:a,children:[P.map((function(e,t){return e.isEdit?Object(n.jsx)(s.a,{id:e.id,icon:Object(n.jsx)(j.a,{hiddenLabel:!0,autoFocus:!0,style:{width:130},id:e.id.toString(),variant:"outlined",size:"small",value:E,onBlur:H,onKeyPress:H,onChange:G})},t):Object(n.jsx)(s.a,{className:"sms-datasource-tab",id:e.id,iconposition:"end",onDoubleClick:W,onMouseMove:V,onMouseLeave:V,label:Object(n.jsxs)(n.Fragment,{children:[e.caption,e.showRemoveIcon?Object(n.jsx)(D.a,{style:{position:"absolute",right:0},onClick:X}):null]})},t)})),Object(n.jsx)(s.a,{label:"\u271a",style:{minWidth:"48px",background:"#c3bfbf"},onClick:function(e){var a=P.slice(),n=Math.max.apply(null,a.map((function(e){return e.id})));a.push({id:++n,caption:t("newTable")+(a.length+1),isEdit:!1}),U(a)}})]}),P.map((function(e,a){return Object(k.a)(e.content)?Object(n.jsx)(p,{style:{width:"100%"},value:d,index:a,children:Object(n.jsx)(S.a,{style:{heigth:"500px",width:"600px"},acceptedFiles:[".csv",".xlsx"],filesLimit:1,maxFileSize:5242880,dropzoneText:t("uploadDataSource"),onChange:q})},a):Object(n.jsx)(p,{style:{width:"100%"},value:d,index:a,children:Object(n.jsx)(N.a,{style:{minWidth:"100%"},keyField:"_id",hover:!0,data:L(e.content),columns:F(e.content),cellEdit:I()({mode:"dbclick",blurToSave:!0})})},a)}))]}),Object(n.jsxs)(h.a,{open:J,onClose:Y,children:[Object(n.jsx)(m.a,{id:"delete-dialog-title",children:t("confirmDeleteTable")}),Object(n.jsx)(f.a,{style:{width:"450px"},children:Object(n.jsxs)(v.a,{id:"delete-dialog-description",children:[t("dataTable"),":\u300c",P[d].caption,"\u300d",t("confirmDeleteDetail")]})}),Object(n.jsxs)(x.a,{children:[Object(n.jsx)(O.a,{onClick:Y,variant:"contained",color:"primary",autoFocus:!0,children:t("Disagree")}),Object(n.jsx)(O.a,{onClick:function(e){var t=P.slice();t.splice(d,1),u(t.length-1),U(t),Y()},disabled:1===P.length,children:t("Agree")})]})]})]})},J=a(479),_=a.n(J),A=a(481),K=a.n(A),P=Object(d.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",height:"100%"},tabs:{borderRight:"1px solid ".concat(e.palette.divider)},test:{width:"50px !important"}}}));t.default=function(){var e=Object(g.a)().t,t=P(),a=[{caption:e("setting"),component:Object(n.jsx)("h1",{children:"yoyoyoyoyo King! \u9019\u662f\u7b2c\u4e00\u9801"})},{caption:e("dataSrouce"),component:Object(n.jsx)(B,{})},{caption:e("smsTool"),component:Object(n.jsx)(_.a,{})},{caption:e("smsScheduler"),component:Object(n.jsx)(K.a,{})}],r=l.a.useState(1),d=Object(c.a)(r,2),u=d[0],b=d[1];return Object(n.jsxs)("div",{className:t.root,children:[Object(n.jsx)(o.a,{className:"sms-index-tabs",orientation:"vertical",variant:"scrollable",value:u,onChange:function(e,t){b(t)},componentsprops:{indicator:{className:"Indicator"}},children:a.map((function(e,t){return Object(n.jsx)(s.a,Object(i.a)({label:e.caption},{id:"vertical-tab-".concat(a=t),"aria-controls":"vertical-tabpanel-".concat(a)}),t);var a}))}),a.map((function(e,t){return Object(n.jsx)(p,{style:{width:"100%"},value:u,index:t,children:e.component},t)}))]})}}}]);
//# sourceMappingURL=4.3ba94135.chunk.js.map